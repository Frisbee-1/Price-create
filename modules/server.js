// ========================
// üì¶ modules/server.js
// –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
// –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å (fetch)
// ========================


// ========================
// 1. –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –ù–ê –°–ï–†–í–ï–†
// ========================

/**
 * –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
 * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ (–Ω–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Ü–µ–Ω–∫–∏ –∏ —Ç.–¥.)
 *
 * @param {Array} materials - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
 * @param {Object} synonyms - —Å–ª–æ–≤–∞—Ä—å —Å–∏–Ω–æ–Ω–∏–º–æ–≤
 * @param {Object} prices - –æ–±—ä–µ–∫—Ç —Å —Ü–µ–Ω–∞–º–∏ { "–ú–∞—Ç–µ—Ä–∏–∞–ª": —Ü–µ–Ω–∞ }
 * @param {Object} markupMap - –∫–∞—Ä—Ç–∞ –Ω–∞—Ü–µ–Ω–æ–∫ { "–ú–∞—Ç–µ—Ä–∏–∞–ª": –Ω–∞—Ü–µ–Ω–∫–∞ }
 */
export function saveToServer(materials, synonyms, prices, markupMap) {
  // ========================
  // 1.1 –û–¢–õ–ê–î–û–ß–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
  // ========================
  console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä:", {
    materials,        // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–≤–∫–ª—é—á–∞—è –≥—Ä—É–ø–ø—ã)
    synonyms,         // –û–±—ä–µ–∫—Ç —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏
    prices,           // –û–±—ä–µ–∫—Ç —Å –≤—Ö–æ–¥—è—â–∏–º–∏ —Ü–µ–Ω–∞–º–∏
    markupMap         // –û–±—ä–µ–∫—Ç —Å –Ω–∞—Ü–µ–Ω–∫–∞–º–∏
  });

  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
  console.log("üìé materials –ø–µ—Ä–µ–¥ fetch:", materials);

  // ========================
  // 1.2 –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• (fetch)
  // ========================
  return fetch("http://localhost:3001/api/data", {
    method: "POST", // –ò—Å–ø–æ–ª—å–∑—É–µ–º POST-–∑–∞–ø—Ä–æ—Å
    headers: {
      "Content-Type": "application/json", // –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º JSON
    },
    body: JSON.stringify({
      materials,     // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
      synonyms,      // —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å–∏–Ω–æ–Ω–∏–º—ã
      prices,        // —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ü–µ–Ω—ã
      markupMap      // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Ü–µ–Ω–∫–∏
    }),
  })
    // ========================
    // 1.3 –û–ë–†–ê–ë–û–¢–ö–ê –û–¢–í–ï–¢–ê
    // ========================
    .then((res) => res.json()) // –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–≤–µ—Ç –≤ JSON
    .then(() => {
      console.log("‚úÖ saveToServer: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (then)"); // –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
    })

    // ========================
    // 1.4 –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–ö–ò
    // ========================
    .catch((err) => {
      console.error("‚ùå saveToServer: –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (catch):", err); // —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    });
}

